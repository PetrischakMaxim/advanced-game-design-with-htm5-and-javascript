<!doctype html>
<meta charset="utf-8">
<title>Easing</title>
<script src="../library/plugins/traceur-compiler/bin/traceur.js" type="text/javascript"></script>
<script src="../library/plugins/traceur-compiler/src/bootstrap.js" type="text/javascript"></script>
<script>traceur.options.experimental = true;</script>
<script type="module">

    //Import code from the library
    import {makeCanvas, circle, stage, render} from "../library/display";
    import {assets, followEase, contain, getRandomRgbaColor} from "../library/utilities";
    import {makePointer} from "../library/interactive";

    //Load a custom font
    assets.load(["fonts/puzzler.otf"]).then(() => setup());

    //Declare any variables shared between functions
    let canvas, c1, pointer;

    function setup() {
        //Make the canvas and initialize the stage
        canvas = makeCanvas(512, 512);
        stage.width = canvas.width;
        stage.height = canvas.height;

        //Create a circle sprite offset by 32 pixels to the
        //left and top of the stage
        c1 = circle(64, "gray");
        stage.putCenter(c1, 0, 0);

        //Make the pointer
        pointer = makePointer(canvas);

        //Start the game loop
        gameLoop();
    }

    function gameLoop() {
        requestAnimationFrame(gameLoop);

        //Make the circle ease towards the pointer's position
        followEase(c1, pointer, 0.25);
        let collision = contain(c1, stage.localBounds, true, () => {
            c1.fillStyle = getRandomRgbaColor();
        });

        //Render the canvas
        render(canvas);
    }
</script>


